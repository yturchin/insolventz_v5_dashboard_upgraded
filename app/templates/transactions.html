{% extends "base.html" %}

{% block content %}
  <div class="bg-white border rounded p-4">
    <div class="flex flex-col md:flex-row md:items-end gap-3">
      <div class="flex-1">
        <label class="text-xs text-slate-500">Search</label>
        <input name="q" form="txFilters" value="{{ filters.q }}" class="w-full border rounded px-2 py-1" placeholder="name / IBAN / purpose" />
      </div>
      <div>
        <label class="text-xs text-slate-500">From</label>
        <input type="date" name="date_from" form="txFilters" value="{{ filters.date_from }}" class="border rounded px-2 py-1" />
      </div>
      <div>
        <label class="text-xs text-slate-500">To</label>
        <input type="date" name="date_to" form="txFilters" value="{{ filters.date_to }}" class="border rounded px-2 py-1" />
      </div>
      <div class="flex items-center gap-2">
        <input type="checkbox" id="incdup" name="include_duplicates" form="txFilters" {% if filters.include_duplicates %}checked{% endif %} />
        <label for="incdup" class="text-sm">Include duplicates</label>
      </div>
      <div>
        <button class="border rounded px-3 py-2 text-sm" form="txFilters">Apply</button>
      </div>
    </div>

    <form id="txFilters" class="hidden" hx-get="/transactions/table" hx-target="#txTable" hx-push-url="true">
      <!-- inputs are associated via form attribute -->
      <input type="hidden" name="page" value="1" />
      <input type="hidden" name="page_size" value="{{ page_size }}" />
      <input type="hidden" name="order" value="{{ filters.order }}" />
      <input type="hidden" name="dir" value="{{ filters.dir }}" />
    </form>
  </div>

  <div class="mt-4" id="txTable">
    {% include "partials/transactions_table.html" %}
  </div>
{% endblock %}
